# 1. 시계열 분석의 개념
## 1. 시계열 분석의 개념
- 시계열 분석은 일정 시간 간격으로 기록된 자료들에 대하여 특성을 파악하고 미래를 예측하는 분석방법이다. 가까운 미래에 있을 날씨 예측, 주식 예측, 판매 예측 등의 목적으로 사용된다.
- 주가, 환율, 월별 재고량, 일일 확진자 수 등이 시계열 자료에 해당한다.

## 2. 시계열 자료의 자기상관성
- 주식이나 기온 등의 시계열 자료들은 자기상관성(Autocorrelation)을 가지고 있다. 이 말은 서로 이웃하는 자료들끼리 일종의 상관관계를 가진다는 말이다. 수학적으로 풀어보면 하나의 잔차항의 크기가 이웃하는 다른 잔차항의 크기와 서로 일정한 관련이 있다는 말과 같다. 시계열 자료는 인접한 자료들과 상호 연관성을 가진다는 의미다.
- 여기서 공분산(Covariance)의 개념을 살펴봐야 한다. 공분산은 두 개의 확률 변수의 선형관계를 나타낸다. 하나의 확률 변수의 증감에 따른 다른 확률 변수의 증감 경향에 대한 측도다. 분산이라는 개념을 확장하여 두 개의 '확률 변수'의 흩어진 정도를 표현한 것이 공분산이다.
- 공분산이 시계열 분산에서 중요한 이유는 바로 시계열 자료의 자기상관성 때문이다. 시계열 자료는 서로 인접한 이웃 자료들끼리 자기상관성을 갖는다고 말했다. 그렇기 때문에 확률변수의 흩어짐 정도를 의미하는 공분산이 어느 정도인지, 다시 말해 어느 정도의 상관성을 갖는지가 중요한 것이다. 여기서 만약 두 확률변수의 공분산이 0이라면 그건 자기상관성이 없는 독립적인 확률변수로 봐야 한다.
- 이 개념은 바로 상관관계와 관련이 있는 개념이다. 공분산은 평균이나 편차에 대해 정규화가 안 된 값이다 보니 그 정도나 비교가 어렵다. 그래서 공분산값을 정규화한 것이 바로 상관계수다.
- 따라서 대부분의 시계열 자료들은 자기상관성을 가지기 떄문에 공분산이 0이 아니다. 또 시계열 분석석에서는 상관분석에서 중요하게 다루어지는 상관계수와 같이 상관성의 정도를 나타내는 '자기상관계수' 개념이 중요하다.

## 3. 시계열 분석의 자료
- 시계열 분석의 자료는 크게 정상성 시계열 자료와 비정상성 시계열 자료로 구분되는데, 대부분의 시계열 자료는 비정상성 시계열 자료이다.
- 그런데 문제는 시계열 분석을 수행하려면 정상성 자료여야 하는데, 정상성이란 평균이 일정할 것, 분산이 시점에 의존하지 않을 것 등의 일정한 조건을 요구한다. 따라서 자료가 대부분 비정상성이므로 이를 정상성 시계열 자료로 변환해야 한다.

# 2. 시계열 자료의 정상성 조건
## 1. 일정한 평균
- 모든 시점에 대하여 평균이 일정해야 한다. 그렇지 않다면 차분을 통해 정상화할 수 있다.
- 차분이란 현 시점의 자료값에서 전 시점의 자료 값을 뺴는 것이다. 만약 연중 기온을 예측하는 것과 같이 계절적인 주기가 있는 경우에는 여러 시점 전의 자료 값을 빼는 계절 차분을 사용한다.

## 2. 일정한 분산
- 모든 시점에 대하여 분산이 일정해야 한다. 그렇지 않다면 변환을 통해 정상화할 수 있다.
- 자료 값에 지수 혹은 로그를 취해 변환하여 시간에 따라 변하는 분산의 크기를 안정시킬 수 있다.

## 3. 시차에만 의존하는 공분산
- 공분산은 단지 시차에만 의존하고 특정 시점에 의존하지 않는다.
- t는 시점, s는 시차라고 했을 떄, 't시점과 t+s시점의 공분산'과 't시점과 t-s시점의 공분산'은 서로 같다.
- 특정한 시간의 관점을 시점이라 하고, 시점과 시점 간의 차이를 시차라고 한다. 공분산이 특정 시점에 의존하지 않는다는 말은 't시점과 t+s시점의 공분산'과 't시점과 t-s시점의 공분산'은 서로 같다는 의미다. 다만 시차, 즉 시점과 시점 간의 차이에 따라 공분산 값은 다를 수 있다. 

# 3. 자기상관계수
## 1. 자기상관계수: ACF(Autocorrelation Function)
- 시계열 분석에서 자기상관계수는 시간의 흐름에 따른 자기상관관계를 나타낸다. 중요한 것은 어떤 특정한 시점이 아니라 '시간의 흐름'에 따른 변수 간의 상과관계 변화라는 점이다. 앞서 공분산이 특정 시점이 아니라 시차에 의존한다는 말이 이해가 갈 것이다.
- 만약 시계열 자료가 시간의 흐름에 따라 일정한 패턴들이 보인다면 그것은 바로 변수들이 자기상관성을 갖고 있기 때문이다.
- 시계열 분석에서는 자시상관함수를 시계열 자료가 시간에 의존하지 않고 무작위성을 띠는지 확인하는 데 사용한다. 만약 시계열 데이터가 무작위성을 띠지 않는다면 시계열 분석을 통한 미래 시점의 예측도 가능하다.
- 자기상관함수는 특정 시점 t에서의 값과 t로부터 l만큼의 시차를 갖는 t+l 시점에서의 값의 상관계수(자시상관계수)를 나타내는 함수다.
- 자기상관함수는 시차 l을 x축으로, 상관계수를 y축으로 하는 그래프로 표현 가능하다. 시차 l=0인 경우에는 자신과의 상관계수를 의미하며, 항상 1이다. 일반적으로 자시상관계수는 시차가 증가하면서 자기상관계수 값이 감소한다.

## 2. 부분자기상관계수: PACF(Partial Autocorrelation Function)
- 자기상관함수는 두 시계열 확률변수 간의 상관관계를 보여주지만, 부분자기상관함수는 두 시계열 확률변수 간에 다른 시점의 확률변수 영향력은 통제하고 상관관계만 보여준다.
- 예를 들어, 교회가 많을수록 범죄 발생률이 높다는 연구가 있다고 장하자. 이 연구의 결론이 과연 옳은 분석 결과일까? 교회가 많다는 것은 인구수가 많다는 것이다. 그렇다면 범죄발생률이 높은 것이 과연 교회 때문일까? 이때 영향을 주는 인구라는 요소를 제외하고 오로지 교회와 범죄발생률만을 놓고 상관관계를 분석해본다면 바로 이것이 부분자기상관계수 개념이다.
- 두 시계열 확률변수의 상관계수를 알아보려고 할 때, 그에 영향을 주는 요소들을 제외하고 오로지 둘 사이의 상관관계만을 고려할 때 부분자기상관계수를 이용한다는 것이다.
- 부분자기상관계수는 시점 t와 시차 l을 갖는 t+l 시점 사이에 존재하는 l-1개의 자료값이 자기상관계수에 미치는 영향을 제거한 상관계수다. 일반적으로 부분자기상관계수는 특정 시점 이후 급격히 감소한다.

# 4. 시계열 분석 기법
## 1. 이동평균법
- 이동평균법은 시계열 데이터에서 일정 기간별로 자료를 묶어 평균을 구하는 방법이다.
- 시간이 지남에 따라 평균 계산에 포함되는 자료가 바뀌기 때문에 이동평균법이라고 한다. 변동이 많은 시계열 데이터의 평균을 구함으로써 여러 요인으로 인한 변동을 없앨 수 있다.
- 이동평균법은 장기적인 추세를 파악하는데 효율적이나 모든 시점에 대해서 동일한 가중치를 주고있기 때문에 더 많은 정보를 간직한다고 볼 수 있는 일반적인 견해에 어긋난다.

## 2. 지수평활법
- 지수평활법은 이런 문제점을 해결하기 위해 사용하는 방법으로 최근 자료가 과거 자료보다 예측에 효과적이라는 가정하에 최근 데이터일수록 큰 가중치를 부여하고, 오래된 데이터일수록 작은 비중을 부여하는 방식을 사용해 평균을 계산한다.
- 자료의 수가 많고 안정된 패턴을 보이는 경우 예측 품질이 높으며, 불규칙 변동의 영향을 제거할 수 있으므로 중장기 예측에 주로 사용된다.