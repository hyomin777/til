# 1. 의사결정나무 개요
## 1. Decision Tree
- 의사결정나무는 자료를 학습하여 특정 분리 규칙을 찾아내고, 그에 따라 몇 개의 소집단으로 분류하는 분석 방법이다.
- 상위 노드에서 하위 노드로 분류하는 과정이 나무가지와 유사한 구조로 나타나며, 의사결정이 진행되는 방식을 한눈에 볼 수 있다.
- 따라서, 데이터의 어떤 기준을 바탕으로 분류 기준값을 정의하는지가 알고리즘의 성능에 큰 영향을 미친다.
- 올바른 분류를 위해서는 상위 노드에서 하위 노드로 갈수록 집단 내에서는 동질성이, 집단 간에는 이질성이 커져야 한다.

## 2. 의사결정나무 구성 요소
- 의사결정나무는 종속변수가 연속형이 회귀트리와 종속변수가 이산형인 분류트리로 구분된다.
- 의사결정나무는 상위 노드에서 하위 노드로 가면서 집단이 분류된다.
    - 뿌리마디(Root Node): 전체 자료를 포함하고 있는 가장 최상위 마디
    - 자식마디(Child Node): 하나의 마디로부터 나온 2개 이상의 하위 마디
    - 부모마디(Parent Node): 모든 자식마디의 바로 상위 마디
    - 끝마디(Leaf Node): 자식마디가 없는 최하위 마디
    - 중간마디(Internal Node): 부모마디와 자식마디를 모두 보유한 마디
    - 가지(Edge): 부모마디와 자식마디를 연결하는 연결선
    - 깊이(Depth): 뿌리마디를 제외한 중간마디 수

## 3. 의사결정나무의 활용
- 세분화: 비슷한 특성을 가진 그룹별로 분할
- 분류: 종속변수의 범주를 몇 개의 등급으로 분류
- 예측: 데이터들로부터 규칙을 찾아내어 이를 예측에 활용
- 차원 축소 및 변수 선택: 여러 개의 독립변수들 중에서 종속변수에 큰 영향을 끼치는 변수를 선택
- 교호작용: 여러 개의 독립변수들을 결합하여 종속변수에 작용하는 규칙을 파악 / 범주형 변수를 병합 또는 연속형 변수를 몇 개의 등급으로 이산화

## 4. 의사결정나무의 특징
- 장점
    - 모델이 직관적이고 해석이 용이하다.
    - 데이터 정규화 및 단위 변환이 필요하지 않다.
    - 다른 기법에 비해 전처리 작업이 어렵지 않다.
    - 이산형 변수, 연속형 변수 모두에 적용 가능하다.
    - 데이터의 선형성, 정규성 등의 가정이 불필요하다.
    - 이상값에 민감하지 않다.
- 단점
    - 독립변수들 사이의 중요도를 판단하기 쉽지 않다.
    - 분류 경계선 근처의 자료에 대해 오차가 크다.
    - 과적합 발생 가능성이 높다.

# 2. 의사결정나무의 분석 과정
## 1. 성장
- 성장 단계: 분석 목적과 자료구조에 따라 적절한 분리 기준과 정지 규칙을 설정해 의사결정나무를 설장시키는 단계다. 각 마디에서 최적의 분리 규칙을 찾아 의사결정나무를 형성하고 적절한 정지 규칙을 만족하면 나무의 성장을 중단한다. 최적의 불할은 불순도 감소량을 가장 크게하는 분할이다.

- 분리기준: 의사결정나무는 데이터를 분류하는 방법으로 불순도를 사용한다. 불순도는 자료들의 범주가 한 그룹 안에 얼마나 섞여 있는지를 나타내는 측도로서 분류가 잘되어 하나의 범주로만 구성되어있으면 불순도 값은 작고, 다양한 범주의 데이터로 구성되어 있으면 불순도 값은 크다.
    - 종속변수가 이산형일 경우: 분류트리를 사용하며, 분리 기준으로 카이제곱 검정, 지니 지수, 엔트로피 지수 등을 사용한다.
    - 종속변수가 연속형일 경우: 회귀트리를 사용하며, 분리 기준으로 분산분석에서의 F통계량, 분산의 감소량 등을 사용한다.

- 정지규칙: 의사결정나무가 너무 많은 분리 기준을 보유하고 있으면 해석상의 어려움이 발생한다. 따라서 분석자가 설정한 특정 조건하에 현재의 마디에서 더 이상 분리가 일어나지 않고 현재의 마디가 끝마디가 되도록 정지시킨다.
    - 뿌리마디로부터 일정 깊이에 도달하였을 경우
    - 불순도의 감소량이 아주 작아 분리에 의미가 없는 경우
    - 마디에 속하는 자료가 일정 수 이하인 경우
    - 모든 자료들이 하나의 그룹에 속하는 경우

## 2. 가지치기
- 의사결정나무도 데이터 마이닝 기법 중 하나로 모형이 복잡한 경우 과적합이, 너무 단순한 경우 과소적합이 발생한다.
- 의사결정나무의 성장이 끝났지만 모형이 너무 복잡한 경우 과적합이 발생할 수 있어 일부 가지를 적당히 제거하여 적당한 크기의 완성된 의사결정나무 모형으로 만들어준다.

## 3. 타당성 평가
- 형성된 의사결정나무를 평가하는 단계다.
- 검증용 데이터를 이용해 모델의 예측 정확도를 평가하거나 이익 도표 등의 평가 지표를 이용해 의사결정나무를 평가한다.

## 4. 해석 및 예측
- 구축된 의사결정나무를 예측해 적용하고 이를 해석하는 단계다.